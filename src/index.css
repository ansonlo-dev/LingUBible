@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 255, 255, 255;
    --foreground: 0, 0, 0;
    --card: 245, 245, 245;
    --card-foreground: 0, 0, 0;
    --popover: 255, 255, 255;
    --popover-foreground: 33, 33, 33;
    --primary: 220, 38, 38;
    --primary-foreground: 255, 255, 255;
    --secondary: 229, 231, 235;
    --secondary-foreground: 33, 33, 33;
    --muted: 243, 244, 246;
    --muted-foreground: 107, 114, 128;
    --accent: 243, 244, 246;
    --accent-foreground: 33, 33, 33;
    --destructive: 239, 68, 68;
    --destructive-foreground: 255, 255, 255;
    --border: 209, 213, 219;
    --input: 209, 213, 219;
    --ring: 220, 38, 38;
    --radius: 0.5rem;
    --sidebar-background: 255, 255, 255;
    --sidebar-foreground: 0, 0, 0;
    --sidebar-primary: 220, 38, 38;
    --sidebar-primary-foreground: 255, 255, 255;
    --sidebar-accent: 243, 244, 246;
    --sidebar-accent-foreground: 33, 33, 33;
    --sidebar-border: 209, 213, 219;
    --sidebar-ring: 220, 38, 38;
  }

  .dark {
    --background: 0, 0, 0;
    --foreground: 255, 255, 255;
    --card: 24, 24, 27;
    --card-foreground: 255, 255, 255;
    --popover: 39, 39, 42;
    --popover-foreground: 255, 255, 255;
    --primary: 220, 38, 38;
    --primary-foreground: 255, 255, 255;
    --secondary: 55, 65, 81;
    --secondary-foreground: 255, 255, 255;
    --muted: 55, 65, 81;
    --muted-foreground: 156, 163, 175;
    --accent: 55, 65, 81;
    --accent-foreground: 255, 255, 255;
    --destructive: 239, 68, 68;
    --destructive-foreground: 255, 255, 255;
    --border: 63, 63, 70;
    --input: 63, 63, 70;
    --ring: 220, 38, 38;
    --sidebar-background: 0, 0, 0;
    --sidebar-foreground: 255, 255, 255;
    --sidebar-primary: 220, 38, 38;
    --sidebar-primary-foreground: 255, 255, 255;
    --sidebar-accent: 55, 65, 81;
    --sidebar-accent-foreground: 255, 255, 255;
    --sidebar-border: 63, 63, 70;
    --sidebar-ring: 220, 38, 38;
  }
}

@layer base {
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  .glass-card {
    @apply backdrop-blur-sm bg-gray-50 dark:bg-gray-900/80 border border-gray-100 dark:border-gray-700/20;
  }
  
  .gradient-text {
    @apply bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent;
  }
  
  .gradient-primary,
  .bg-gradient-primary {
    background: linear-gradient(135deg, rgb(220, 38, 38) 0%, rgb(136, 19, 23) 100%) !important;
    color: white !important;
  }

  /* 確保在黑暗模式下也使用相同的紅色 */
  .dark .gradient-primary,
  .dark .bg-gradient-primary {
    background: linear-gradient(135deg, rgb(220, 38, 38) 0%, rgb(136, 19, 23) 100%) !important;
    color: white !important;
  }

  .rolling-text {
    @apply inline-block relative overflow-hidden;
    height: 1.75rem; /* 與 text-lg 的 line-height 匹配 */
    width: auto;
    min-width: 120px;
    vertical-align: baseline; /* 確保與前面的文字對齊 */
  }

  .rolling-text-item {
    @apply absolute top-0 left-0 w-full flex items-center justify-center;
    transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
    color: rgb(220, 38, 38);
    font-weight: 600;
    height: 1.75rem; /* 與容器高度匹配 */
  }
}

/* 確保 sticky 定位正常工作 */
header {
  position: sticky !important;
  top: 0 !important;
  z-index: 50 !important;
  background-color: rgb(var(--background)) !important;
}

/* 確保 SidebarTrigger 始終可見 */
[data-sidebar="trigger"] {
  position: fixed !important;
  z-index: 100 !important;
  transition: left 0.3s ease !important;
}

/* 強制所有主要容器區域都跟隨主題 */
html {
  background-color: rgb(255, 255, 255);
  color: rgb(0, 0, 0);
}

html.dark {
  background-color: rgb(0, 0, 0);
  color: rgb(255, 255, 255);
}

body, 
#root, 
.min-h-screen, 
main,
[class*="bg-background"] {
  transition: background-color 0.3s ease, color 0.3s ease;
}

.dark body, 
.dark #root, 
.dark .min-h-screen, 
.dark main,
.dark [class*="bg-background"] {
  background-color: rgb(0, 0, 0);
}

/* 強制黑暗模式下文字顏色，但保留特定顏色類別 */
.dark h1, 
.dark h2, 
.dark h3, 
.dark h4, 
.dark h5, 
.dark h6, 
.dark p:not([class*="text-green-"]):not([class*="text-red-"]), 
.dark span:not([class*="text-"]):not(.gradient-text), 
.dark div:not([class*="text-"]) > span:not(.gradient-text), 
.dark a:not([class*="text-"]), 
.dark label, 
.dark button:not([class*="text-"]):not([class*="gradient-primary"]):not([class*="bg-gradient-primary"]) {
  color: rgb(255, 255, 255);
}

/* 明確重設一些可能會被覆蓋的元素 */
.dark [class*="text-foreground"] {
  color: rgb(255, 255, 255) !important;
}