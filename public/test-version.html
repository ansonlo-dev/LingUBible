<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰ˆæœ¬é¡¯ç¤ºæ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            background-color: #fed7aa;
            color: #ea580c;
            border-radius: 6px;
            text-decoration: none;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .version-badge:hover {
            background-color: #fdba74;
            transform: scale(1.05);
        }
        .external-icon {
            width: 12px;
            height: 12px;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background-color: #dcfce7;
            color: #166534;
        }
        .error {
            background-color: #fecaca;
            color: #dc2626;
        }
        .info {
            background-color: #dbeafe;
            color: #1d4ed8;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ç‰ˆæœ¬é¡¯ç¤ºæ¸¬è©¦</h1>
    
    <div class="test-container">
        <h2>1. éœæ…‹ç‰ˆæœ¬å¾½ç« æ¸¬è©¦</h2>
        <p>é€™æ˜¯ä¸€å€‹éœæ…‹çš„ç‰ˆæœ¬å¾½ç« ï¼Œæ‡‰è©²å¯ä»¥é»æ“Šè·³è½‰åˆ° GitHubï¼š</p>
        <a href="https://github.com/ansonlo-dev/LingUBible/releases/tag/v0.0.5" 
           target="_blank" 
           rel="noopener noreferrer"
           class="version-badge">
            <svg class="external-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
            Beta 0.0.5
        </a>
        <div id="static-test-result" class="test-result info">
            é»æ“Šä¸Šæ–¹å¾½ç« æ¸¬è©¦éœæ…‹é€£çµåŠŸèƒ½
        </div>
    </div>

    <div class="test-container">
        <h2>2. GitHub API æ¸¬è©¦</h2>
        <p>æ¸¬è©¦ GitHub API æ˜¯å¦èƒ½æ­£å¸¸ç²å–ç‰ˆæœ¬è³‡è¨Šï¼š</p>
        <button onclick="testGitHubAPI()" style="padding: 8px 16px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
            æ¸¬è©¦ GitHub API
        </button>
        <div id="api-test-result" class="test-result info">
            é»æ“ŠæŒ‰éˆ•æ¸¬è©¦ GitHub API
        </div>
        <div id="token-status" class="test-result info" style="margin-top: 10px;">
            æª¢æŸ¥ GitHub Token ç‹€æ…‹...
        </div>
    </div>

    <div class="test-container">
        <h2>3. æœ¬åœ°ç‰ˆæœ¬è³‡è¨Š</h2>
        <p>ç•¶å‰ package.json ä¸­çš„ç‰ˆæœ¬ï¼š</p>
        <div id="local-version" class="test-result info">
            è¼‰å…¥ä¸­...
        </div>
    </div>

    <div class="test-container">
        <h2>4. ç€è¦½å™¨æ§åˆ¶å°</h2>
        <p>è«‹æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„æ§åˆ¶å°æŸ¥çœ‹è©³ç´°æ—¥èªŒ</p>
        <div class="test-result info">
            æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼ŒæŸ¥çœ‹ Console æ¨™ç±¤
        </div>
    </div>

    <script>
        console.log('ğŸ§ª ç‰ˆæœ¬æ¸¬è©¦é é¢è¼‰å…¥');
        
        // æ¸¬è©¦ GitHub API
        async function testGitHubAPI() {
            const resultDiv = document.getElementById('api-test-result');
            resultDiv.textContent = 'æ¸¬è©¦ä¸­...';
            resultDiv.className = 'test-result info';
            
            try {
                console.log('ğŸ“¡ æ¸¬è©¦ GitHub API...');
                const response = await fetch('https://api.github.com/repos/ansonlo-dev/LingUBible/releases/latest');
                console.log('ğŸ“¡ API å›æ‡‰ç‹€æ…‹:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('ğŸ“¡ API å›æ‡‰è³‡æ–™:', data);
                
                resultDiv.innerHTML = `
                    <strong>âœ… API æ¸¬è©¦æˆåŠŸ</strong><br>
                    æ¨™ç±¤: ${data.tag_name}<br>
                    åç¨±: ${data.name}<br>
                    URL: <a href="${data.html_url}" target="_blank">${data.html_url}</a><br>
                    ç™¼å¸ƒæ™‚é–“: ${new Date(data.published_at).toLocaleString()}
                `;
                resultDiv.className = 'test-result success';
                
            } catch (error) {
                console.error('âŒ API æ¸¬è©¦å¤±æ•—:', error);
                resultDiv.innerHTML = `
                    <strong>âŒ API æ¸¬è©¦å¤±æ•—</strong><br>
                    éŒ¯èª¤: ${error.message}<br>
                    é€™å¯èƒ½æ˜¯å› ç‚ºï¼š<br>
                    â€¢ GitHub Release å°šæœªå‰µå»º<br>
                    â€¢ å€‰åº«æ˜¯ç§æœ‰çš„<br>
                    â€¢ API é™åˆ¶<br>
                    â€¢ ç¶²è·¯å•é¡Œ
                `;
                resultDiv.className = 'test-result error';
            }
        }
        
        // é¡¯ç¤ºæœ¬åœ°ç‰ˆæœ¬
        function showLocalVersion() {
            const localVersionDiv = document.getElementById('local-version');
            // æ¨¡æ“¬å¾ package.json ç²å–ç‰ˆæœ¬
            const version = '0.0.5'; // é€™æ‡‰è©²å¾å¯¦éš›çš„ package.json ç²å–
            localVersionDiv.innerHTML = `
                <strong>æœ¬åœ°ç‰ˆæœ¬:</strong> ${version}<br>
                <strong>æ ¼å¼åŒ–ç‰ˆæœ¬:</strong> Beta ${version}<br>
                <strong>ç‹€æ…‹:</strong> Beta ç‰ˆæœ¬<br>
                <strong>é æœŸ Release URL:</strong> <a href="https://github.com/ansonlo-dev/LingUBible/releases/tag/v${version}" target="_blank">
                    https://github.com/ansonlo-dev/LingUBible/releases/tag/v${version}
                </a>
            `;
        }
        
        // æª¢æŸ¥ GitHub Token ç‹€æ…‹
        function checkTokenStatus() {
            const tokenStatusDiv = document.getElementById('token-status');
            
            // æ¨¡æ“¬æª¢æŸ¥ç’°å¢ƒè®Šæ•¸ï¼ˆåœ¨å¯¦éš›æ‡‰ç”¨ä¸­é€™æœƒå¾ import.meta.env ç²å–ï¼‰
            const hasToken = false; // åœ¨æ¸¬è©¦é é¢ä¸­ç„¡æ³•çœŸæ­£æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
            
            if (hasToken) {
                tokenStatusDiv.innerHTML = 'âœ… GitHub Token å·²é…ç½®';
                tokenStatusDiv.className = 'test-result success';
            } else {
                tokenStatusDiv.innerHTML = `
                    âš ï¸ GitHub Token æœªé…ç½®<br>
                    <small>
                        â€¢ å¦‚æœå€‰åº«æ˜¯ç§æœ‰çš„ï¼Œéœ€è¦é…ç½® GitHub Token<br>
                        â€¢ åƒè€ƒæ–‡æª”ï¼š<a href="/docs/setup/GITHUB_TOKEN_SETUP.md" target="_blank">GitHub Token è¨­ç½®æŒ‡å—</a><br>
                        â€¢ ç’°å¢ƒè®Šæ•¸ï¼šVITE_GITHUB_TOKEN
                    </small>
                `;
                tokenStatusDiv.className = 'test-result info';
            }
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ é é¢è¼‰å…¥å®Œæˆ');
            showLocalVersion();
            checkTokenStatus();
            
            // æ¸¬è©¦éœæ…‹é€£çµé»æ“Š
            document.querySelector('.version-badge').addEventListener('click', function(e) {
                console.log('ğŸ”— éœæ…‹ç‰ˆæœ¬å¾½ç« è¢«é»æ“Š');
                document.getElementById('static-test-result').innerHTML = 'âœ… éœæ…‹é€£çµé»æ“ŠæˆåŠŸï¼æ­£åœ¨è·³è½‰...';
                document.getElementById('static-test-result').className = 'test-result success';
            });
        });
    </script>
</body>
</html> 