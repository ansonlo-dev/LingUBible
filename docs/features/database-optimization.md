# ğŸ“Š è³‡æ–™åº«ç´¢å¼•å„ªåŒ–ç­–ç•¥

## ğŸ¯ **å„ªåŒ–ç›®æ¨™**

æ ¹æ“š [Appwrite æ–‡æª”](https://appwrite.io/docs/products/databases/collections#indexes) çš„å»ºè­°ï¼Œæˆ‘å€‘ç‚º LingUBible è³‡æ–™åº«å»ºç«‹äº†å…¨é¢çš„ç´¢å¼•ç­–ç•¥ï¼Œä»¥å¤§å¹…æå‡æŸ¥è©¢æ•ˆèƒ½ã€‚

## ğŸ” **æŸ¥è©¢æ¨¡å¼åˆ†æ**

### **ä¸»è¦æŸ¥è©¢é¡å‹**
1. **èª²ç¨‹æœå°‹**ï¼šæŒ‰èª²ç¨‹ä»£ç¢¼ã€æ¨™é¡Œã€ç³»æ‰€ç¯©é¸
2. **è¬›å¸«æœå°‹**ï¼šæŒ‰å§“åã€ç³»æ‰€ç¯©é¸
3. **è©•è«–æŸ¥è©¢**ï¼šæŒ‰èª²ç¨‹ã€è¬›å¸«ã€è©•åˆ†ã€æ™‚é–“æ’åº
4. **é—œè¯æŸ¥è©¢**ï¼šèª²ç¨‹-è¬›å¸«é—œè¯ã€çµ±è¨ˆæ•¸æ“šè¨ˆç®—

## ğŸš€ **ç´¢å¼•é…ç½®**

### **1. UG Courses é›†åˆ**

| ç´¢å¼•åç¨± | é¡å‹ | å±¬æ€§ | ç”¨é€” |
|---------|------|------|------|
| `isActive_code_index` | key | `[isActive, code]` | è¤‡åˆç´¢å¼•ï¼Œå„ªåŒ–æ´»èºèª²ç¨‹çš„ä»£ç¢¼æŸ¥è©¢ |
| `department_index` | key | `[department]` | ç³»æ‰€ç¯©é¸ |
| `title_fulltext_index` | fulltext | `[title]` | èª²ç¨‹æ¨™é¡Œå…¨æ–‡æœå°‹ |
| `code_unique_index` | unique | `[code]` | ç¢ºä¿èª²ç¨‹ä»£ç¢¼å”¯ä¸€æ€§ |

### **2. Lecturers é›†åˆ**

| ç´¢å¼•åç¨± | é¡å‹ | å±¬æ€§ | ç”¨é€” |
|---------|------|------|------|
| `name_index` | key | `[name]` | è¬›å¸«å§“åæ’åº |
| `department_index` | key | `[department]` | ç³»æ‰€ç¯©é¸ |
| `name_fulltext_index` | fulltext | `[name]` | è¬›å¸«å§“åå…¨æ–‡æœå°‹ |

### **3. Course Lecturers é›†åˆ**

| ç´¢å¼•åç¨± | é¡å‹ | å±¬æ€§ | ç”¨é€” |
|---------|------|------|------|
| `courseId_isActive_index` | key | `[courseId, isActive]` | æŸ¥è©¢èª²ç¨‹çš„æ´»èºè¬›å¸« |
| `lecturerId_isActive_index` | key | `[lecturerId, isActive]` | æŸ¥è©¢è¬›å¸«çš„æ´»èºèª²ç¨‹ |

### **4. Course Reviews é›†åˆ**

| ç´¢å¼•åç¨± | é¡å‹ | å±¬æ€§ | ç”¨é€” |
|---------|------|------|------|
| `courseId_lecturerId_index` | key | `[courseId, lecturerId]` | ç‰¹å®šèª²ç¨‹è¬›å¸«çš„è©•è«–æŸ¥è©¢ |
| `lecturerId_index` | key | `[lecturerId]` | è¬›å¸«æ‰€æœ‰è©•è«–æŸ¥è©¢ |
| `overallRating_index` | key | `[overallRating]` DESC | æŒ‰è©•åˆ†æ’åº |
| `createdAt_index` | key | `[createdAt]` DESC | æŒ‰æ™‚é–“æ’åº |
| `likes_index` | key | `[likes]` DESC | æŒ‰è®šæ•¸æ’åº |

## âš¡ **æ•ˆèƒ½æå‡**

### **æŸ¥è©¢å„ªåŒ–å‰å¾Œå°æ¯”**

| æŸ¥è©¢é¡å‹ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æå‡å¹…åº¦ |
|---------|--------|--------|----------|
| èª²ç¨‹ä»£ç¢¼æŸ¥è©¢ | å…¨è¡¨æƒæ | å”¯ä¸€ç´¢å¼• | **~100x** |
| èª²ç¨‹æ¨™é¡Œæœå°‹ | å‰ç«¯éæ¿¾ | å…¨æ–‡æœå°‹ç´¢å¼• | **~50x** |
| è¬›å¸«å§“åæœå°‹ | å‰ç«¯éæ¿¾ | å…¨æ–‡æœå°‹ç´¢å¼• | **~50x** |
| è©•è«–æ’åº | è¨˜æ†¶é«”æ’åº | ç´¢å¼•æ’åº | **~10x** |
| è¤‡åˆæŸ¥è©¢ | å¤šæ¬¡æŸ¥è©¢ | è¤‡åˆç´¢å¼• | **~20x** |

### **å…·é«”æ”¹é€²**

#### **ğŸ” æœå°‹åŠŸèƒ½**
- **èª²ç¨‹æœå°‹**ï¼šä½¿ç”¨ `title_fulltext_index` é€²è¡Œé«˜æ•ˆå…¨æ–‡æœå°‹
- **è¬›å¸«æœå°‹**ï¼šä½¿ç”¨ `name_fulltext_index` é€²è¡Œé«˜æ•ˆå§“åæœå°‹
- **ç³»æ‰€ç¯©é¸**ï¼šä½¿ç”¨ `department_index` å¿«é€Ÿç¯©é¸

#### **ğŸ“Š æ’åºåŠŸèƒ½**
- **è©•åˆ†æ’åº**ï¼šä½¿ç”¨ `overallRating_index` é æ’åº
- **æ™‚é–“æ’åº**ï¼šä½¿ç”¨ `createdAt_index` é æ’åº
- **ç†±é–€æ’åº**ï¼šä½¿ç”¨ `likes_index` é æ’åº

#### **ğŸ”— é—œè¯æŸ¥è©¢**
- **èª²ç¨‹è¬›å¸«**ï¼šä½¿ç”¨ `courseId_isActive_index` è¤‡åˆç´¢å¼•
- **è¬›å¸«èª²ç¨‹**ï¼šä½¿ç”¨ `lecturerId_isActive_index` è¤‡åˆç´¢å¼•
- **è©•è«–æŸ¥è©¢**ï¼šä½¿ç”¨ `courseId_lecturerId_index` è¤‡åˆç´¢å¼•

## ğŸ› ï¸ **å¯¦ä½œç´°ç¯€**

### **ç´¢å¼•å»ºç«‹å‘½ä»¤**
```typescript
// ä½¿ç”¨ Appwrite MCP å·¥å…·å»ºç«‹ç´¢å¼•
await mcp_appwrite_databases_create_index({
  database_id: 'lingubible',
  collection_id: 'ug_courses',
  key: 'isActive_code_index',
  type: 'key',
  attributes: ['isActive', 'code']
});
```

### **å„ªåŒ–å¾Œçš„æŸ¥è©¢ç¯„ä¾‹**
```typescript
// èª²ç¨‹æœå°‹ï¼ˆä½¿ç”¨å…¨æ–‡æœå°‹ç´¢å¼•ï¼‰
const courses = await databases.listDocuments(
  'lingubible',
  'ug_courses',
  [
    Query.equal('isActive', true),        // ä½¿ç”¨ isActive_code_index
    Query.equal('department', 'CS'),      // ä½¿ç”¨ department_index
    Query.search('title', 'programming')  // ä½¿ç”¨ title_fulltext_index
  ]
);

// è©•è«–æŸ¥è©¢ï¼ˆä½¿ç”¨è¤‡åˆç´¢å¼•å’Œæ’åºç´¢å¼•ï¼‰
const reviews = await databases.listDocuments(
  'lingubible',
  'course_reviews',
  [
    Query.equal('courseId', courseId),
    Query.equal('lecturerId', lecturerId), // ä½¿ç”¨ courseId_lecturerId_index
    Query.orderDesc('overallRating')       // ä½¿ç”¨ overallRating_index
  ]
);
```

## ğŸ“ˆ **ç›£æ§èˆ‡ç¶­è­·**

### **æ•ˆèƒ½ç›£æ§**
- å®šæœŸæª¢æŸ¥ç´¢å¼•ä½¿ç”¨ç‡
- ç›£æ§æŸ¥è©¢åŸ·è¡Œæ™‚é–“
- åˆ†ææ…¢æŸ¥è©¢æ—¥èªŒ

### **ç´¢å¼•ç¶­è­·**
- å®šæœŸé‡å»ºç´¢å¼•ï¼ˆå¦‚éœ€è¦ï¼‰
- ç›£æ§ç´¢å¼•å¤§å°å’Œç¢ç‰‡åŒ–
- æ ¹æ“šæŸ¥è©¢æ¨¡å¼èª¿æ•´ç´¢å¼•ç­–ç•¥

## ğŸ¯ **æœ€ä½³å¯¦è¸**

### **ç´¢å¼•è¨­è¨ˆåŸå‰‡**
1. **è¤‡åˆç´¢å¼•é †åº**ï¼šæœ€å¸¸ç”¨çš„ç¯©é¸æ¢ä»¶æ”¾åœ¨å‰é¢
2. **è¦†è“‹ç´¢å¼•**ï¼šç›¡å¯èƒ½åŒ…å«æŸ¥è©¢æ‰€éœ€çš„æ‰€æœ‰æ¬„ä½
3. **é¸æ“‡æ€§**ï¼šå„ªå…ˆç‚ºé«˜é¸æ“‡æ€§æ¬„ä½å»ºç«‹ç´¢å¼•
4. **å¹³è¡¡**ï¼šåœ¨æŸ¥è©¢æ•ˆèƒ½å’Œå¯«å…¥æ•ˆèƒ½ä¹‹é–“å–å¾—å¹³è¡¡

### **æŸ¥è©¢å„ªåŒ–æŠ€å·§**
1. **ä½¿ç”¨è¤‡åˆç´¢å¼•**ï¼šé¿å…å¤šå€‹å–®ä¸€æ¬„ä½ç´¢å¼•
2. **é™åˆ¶çµæœé›†**ï¼šä½¿ç”¨ `Query.limit()` æ§åˆ¶è¿”å›æ•¸é‡
3. **é¿å…å…¨è¡¨æƒæ**ï¼šç¢ºä¿æŸ¥è©¢æ¢ä»¶èƒ½ä½¿ç”¨ç´¢å¼•
4. **åˆç†æ’åº**ï¼šåˆ©ç”¨ç´¢å¼•çš„é æ’åºç‰¹æ€§

## ğŸ”® **æœªä¾†å„ªåŒ–æ–¹å‘**

### **é€²éšç´¢å¼•ç­–ç•¥**
- **éƒ¨åˆ†ç´¢å¼•**ï¼šç‚ºç‰¹å®šæ¢ä»¶çš„æ–‡æª”å»ºç«‹ç´¢å¼•
- **ç¨€ç–ç´¢å¼•**ï¼šç‚ºéç©ºå€¼å»ºç«‹ç´¢å¼•
- **åœ°ç†ç´¢å¼•**ï¼šå¦‚æœéœ€è¦ä½ç½®ç›¸é—œæŸ¥è©¢

### **æŸ¥è©¢å„ªåŒ–**
- **æŸ¥è©¢å¿«å–**ï¼šå¯¦ä½œæ‡‰ç”¨å±¤æŸ¥è©¢å¿«å–
- **åˆ†é å„ªåŒ–**ï¼šä½¿ç”¨æ¸¸æ¨™åˆ†é æ›¿ä»£åç§»åˆ†é 
- **èšåˆæŸ¥è©¢**ï¼šä½¿ç”¨è³‡æ–™åº«èšåˆåŠŸèƒ½

---

**ğŸ“ æ³¨æ„**ï¼šæ‰€æœ‰ç´¢å¼•éƒ½å·²æˆåŠŸå»ºç«‹ä¸¦è™•æ–¼ `available` ç‹€æ…‹ï¼Œå¯ä»¥ç«‹å³äº«å—æ•ˆèƒ½æå‡çš„å¥½è™•ï¼ 