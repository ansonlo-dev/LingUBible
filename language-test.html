<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
        .button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background-color: #0056b3;
        }
        code {
            background-color: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>ğŸ” èªè¨€è¨­ç½®æ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š ç€è¦½å™¨ä¿¡æ¯</h2>
        <p><strong>ä¸»è¦èªè¨€:</strong> <code id="primaryLang"></code></p>
        <p><strong>æ‰€æœ‰èªè¨€:</strong> <code id="allLangs"></code></p>
        <p><strong>ç”¨æˆ¶ä»£ç†:</strong> <code id="userAgent"></code></p>
    </div>

    <div class="test-section">
        <h2>ğŸª Cookie ç‹€æ…‹</h2>
        <p><strong>èªè¨€ Cookie:</strong> <code id="langCookie"></code></p>
        <p><strong>æ‰€æœ‰ Cookies:</strong> <code id="allCookies"></code></p>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æ¸¬è©¦æ“ä½œ</h2>
        <button class="button" onclick="setLangCookie('en')">è¨­ç½®è‹±æ–‡</button>
        <button class="button" onclick="setLangCookie('zh-TW')">è¨­ç½®ç¹é«”ä¸­æ–‡</button>
        <button class="button" onclick="setLangCookie('zh-CN')">è¨­ç½®ç°¡é«”ä¸­æ–‡</button>
        <button class="button" onclick="clearLangCookie()">æ¸…é™¤ Cookie</button>
        <button class="button" onclick="reloadPage()">é‡æ–°è¼‰å…¥</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“ å»ºè­°</h2>
        <p>å¦‚æœç™»å…¥ toast é¡¯ç¤ºç°¡é«”ä¸­æ–‡ï¼Œè«‹å˜—è©¦ï¼š</p>
        <ol>
            <li>é»æ“Š "æ¸…é™¤ Cookie" æŒ‰éˆ•</li>
            <li>é»æ“Š "è¨­ç½®è‹±æ–‡" æŒ‰éˆ•</li>
            <li>é»æ“Š "é‡æ–°è¼‰å…¥" æŒ‰éˆ•</li>
            <li>å‰å¾€ <a href="http://localhost:8082/login" target="_blank">ç™»å…¥é é¢</a> æ¸¬è©¦</li>
        </ol>
    </div>

    <script>
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        function setCookie(name, value, days = 365) {
            const expires = new Date();
            expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
            document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
        }

        function setLangCookie(lang) {
            setCookie('language', lang);
            updateDisplay();
            alert(`èªè¨€å·²è¨­ç½®ç‚º: ${lang}`);
        }

        function clearLangCookie() {
            document.cookie = 'language=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            updateDisplay();
            alert('èªè¨€ Cookie å·²æ¸…é™¤');
        }

        function reloadPage() {
            window.location.reload();
        }

        function updateDisplay() {
            // ç€è¦½å™¨èªè¨€ä¿¡æ¯
            document.getElementById('primaryLang').textContent = navigator.language || 'unknown';
            document.getElementById('allLangs').textContent = navigator.languages ? navigator.languages.join(', ') : 'unknown';
            document.getElementById('userAgent').textContent = navigator.userAgent.substring(0, 100) + '...';
            
            // Cookie ä¿¡æ¯
            document.getElementById('langCookie').textContent = getCookie('language') || 'none';
            document.getElementById('allCookies').textContent = document.cookie || 'none';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            
            // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            setInterval(updateDisplay, 1000);
        });
    </script>
</body>
</html> 